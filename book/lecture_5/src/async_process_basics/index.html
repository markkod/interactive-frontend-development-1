
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Asynchronous processes Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../async_process_with_middleware/" />
    
    
    <link rel="prev" href="../../" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../../">
            
                <a href="../../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../../../lecture_1/">
            
                <a href="../../../lecture_1/">
            
                    
                    Lecture 1 - Introduction to the JavaScript ecosystem
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../../../lecture_1/building.html">
            
                <a href="../../../lecture_1/building.html">
            
                    
                    Building with NPM, Yarn, Webpack, Babel
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../../../lecture_1/linting.html">
            
                <a href="../../../lecture_1/linting.html">
            
                    
                    Linting JavaScript source code
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../../../lecture_1/css_modules.html">
            
                <a href="../../../lecture_1/css_modules.html">
            
                    
                    CSS and CSS modules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../../../lecture_1/unit_tests.html">
            
                <a href="../../../lecture_1/unit_tests.html">
            
                    
                    Unit tests
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../../../lecture_2/">
            
                <a href="../../../lecture_2/">
            
                    
                    Lecture 2 - Introduction to React
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../../../lecture_2/src/props_example/">
            
                <a href="../../../lecture_2/src/props_example/">
            
                    
                    React introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../../../lecture_2/src/state_example/">
            
                <a href="../../../lecture_2/src/state_example/">
            
                    
                    State in React
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../../../lecture_2/src/pure_function_example/">
            
                <a href="../../../lecture_2/src/pure_function_example/">
            
                    
                    Pure function components
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../../../lecture_2/src/user_input_example/">
            
                <a href="../../../lecture_2/src/user_input_example/">
            
                    
                    User input
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../../../lecture_3/">
            
                <a href="../../../lecture_3/">
            
                    
                    Lecture 3 - Expanding on React
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../../../lecture_3/src/debugging/">
            
                <a href="../../../lecture_3/src/debugging/">
            
                    
                    Debugging
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../../../lecture_3/src/types_of_components/">
            
                <a href="../../../lecture_3/src/types_of_components/">
            
                    
                    Types of components
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../../../lecture_3/test/">
            
                <a href="../../../lecture_3/test/">
            
                    
                    Testing React components
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../../../lecture_4/">
            
                <a href="../../../lecture_4/">
            
                    
                    Lecture 4 - State management with Redux
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../../../lecture_4/src/higher_order_components/">
            
                <a href="../../../lecture_4/src/higher_order_components/">
            
                    
                    Higher-Order Components
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../../../lecture_4/src/redux_introduction/">
            
                <a href="../../../lecture_4/src/redux_introduction/">
            
                    
                    Redux Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../../../lecture_4/src/redux_basics/">
            
                <a href="../../../lecture_4/src/redux_basics/">
            
                    
                    Redux Basics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../../../lecture_4/src/redux_combine_reducers/">
            
                <a href="../../../lecture_4/src/redux_combine_reducers/">
            
                    
                    Reducer composition
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../../">
            
                <a href="../../">
            
                    
                    Lecture 5 - Middlewares and asynchronous processes
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.6.1" data-path="./">
            
                <a href="./">
            
                    
                    Asynchronous processes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../async_process_with_middleware/">
            
                <a href="../async_process_with_middleware/">
            
                    
                    Asynchronous processes using middleware
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../../../lecture_6/">
            
                <a href="../../../lecture_6/">
            
                    
                    Lecture 6 - Bidirectional communication with servers
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../../../lecture_6/src/websocket_basics/">
            
                <a href="../../../lecture_6/src/websocket_basics/">
            
                    
                    WebSockets
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../../../lecture_7/">
            
                <a href="../../../lecture_7/">
            
                    
                    Lecture 7 - Routes and optimizations
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../../../lecture_7/src/router-basics/">
            
                <a href="../../../lecture_7/src/router-basics/">
            
                    
                    React Router
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../../../lecture_7/src/connected-react-router/">
            
                <a href="../../../lecture_7/src/connected-react-router/">
            
                    
                    React Router connected with Redux
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="../../../lecture_7/src/redux-selector-cache/">
            
                <a href="../../../lecture_7/src/redux-selector-cache/">
            
                    
                    React-Redux optimizations
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../../../lecture_8/">
            
                <a href="../../../lecture_8/">
            
                    
                    Lecture 8 - React visual testing
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="../../../lecture_8/README-storybook.html">
            
                <a href="../../../lecture_8/README-storybook.html">
            
                    
                    React visual testing
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../.." >Asynchronous processes</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="asynchronous-processes-and-redux">Asynchronous processes and Redux</h1>
<h2 id="running-the-application">Running the application</h2>
<pre><code>yarn install
yarn test
yarn start:server
yarn start
</code></pre><p>Open <em>Async process basics</em> subpage.</p>
<h2 id="explanation">Explanation</h2>
<h3 id="asynchronous-processes">Asynchronous processes</h3>
<p>Every asynchronous processes has 3 stages: in-flight, succeeded, failed. All of
these must be handled by the user interface.</p>
<p>Asynchronous processes are much more complex than synchronous processes.
Redux helps, but careful though and design is required.</p>
<h2 id="server-simulation">Server simulation</h2>
<p>A toy server has been added to the project. The server has simulated latency
and intermittently fails to retrieve comments to simulate problems that can
occur in real environments. The server accepts comments under POST /comments
with JSON content type. Comments can be fetched using GET /comments.</p>
<h2 id="new-dependencies">New dependencies</h2>
<ul>
<li><a href="https://github.com/gaearon/redux-thunk" target="_blank">redux-thunk</a></li>
</ul>
<h2 id="asynchronous-actions-in-redux">Asynchronous actions in Redux</h2>
<p><a href="https://redux.js.org/advanced/async-actions" target="_blank">Official documentation</a>.</p>
<p>Thus far we have seen how to dispatch actions when something occurs in Redux.
With asynchronous processes we have to dispatch two times, first when the
process starts and again when the process finishes (successfully or
unsuccessfully). The interim state of a request being in process or <em>in flight</em>
needs to be capture by our application.</p>
<h3 id="components">Components</h3>
<p>Comments can now be fetched from a server. This request is asynchronous.
<a href="https://github.com/urmastalimaa/interactive-frontend-development/blob/master/lecture_5/src/async_process_basics/components/CommentList.js#L20-L36" target="_blank">CommentList</a>
has been changed to accomodate three different stages of the request:
in-flight, success and error.</p>
<p>Submitting Comments is also asynchronous. Every comment itself can also be
in-flight.
<a href="https://github.com/urmastalimaa/interactive-frontend-development/blob/master/lecture_5/src/async_process_basics/components/Comment.js" target="_blank">Comment</a>
has been changed accordingly.</p>
<h3 id="containers">Containers</h3>
<p>Containers have been simply changed to pass the inFlight properties to the
components.</p>
<h3 id="reducers">Reducers</h3>
<p><a href="https://github.com/urmastalimaa/interactive-frontend-development/blob/master/lecture_5/src/async_process_basics/reducers/CommentListReducer.js" target="_blank">CommentListReducer</a>
has been changed to handle 6 actions. 3 different possible results for both
fetching and posting comments.</p>
<h3 id="actions">Actions</h3>
<p>There are 6 <em>simple</em>, synchronous action creators in the <a href="https://github.com/urmastalimaa/interactive-frontend-development/blob/master/lecture_5/src/async_process_basics/actions/index.js" target="_blank">actions
file</a>
representing the different results of the two asynchronous processes. There are
two asynchronous action creators for posting a comment and fetching all
comments in
<a href="https://github.com/urmastalimaa/interactive-frontend-development/blob/master/lecture_5/src/async_process_basics/actions/CommentServerActions.js" target="_blank">CommentServerActions</a>.
The asynchronous action creators make use of a <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API" target="_blank"><code>fetch</code>
API</a> which supports
making requests to remote servers.</p>
<p>Note that the asynchronous action creators do not return a plain-object action,
but a function. Returning a function is not supported natively by Redux, the
capability is added by redux-thunk middleware.</p>
<h3 id="redux-thunk">Redux thunk</h3>
<p>Redux thunk middleware supports returning functions (<em>thunks</em>) from action
creators.  These functions are executed by the middleware with the <code>dispatch</code>
function from store given as a parameter. This means that the <em>thunk</em> function
can call dispatch multiple times or at a later time.</p>
<p><em>Thunk</em> functions usually call other, synchronous action creators to dispatch actions.</p>
<p>Example:</p>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> timer;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> fetchComments = () =&gt; {
  <span class="hljs-keyword">return</span> dispatch =&gt; {
    timer = setTimeout(
      () =&gt; dispatch(receivedComments([<span class="hljs-string">&apos;comment1&apos;</span>, <span class="hljs-string">&apos;comment2&apos;</span>])),
      <span class="hljs-number">1000</span>
    )
  }
}
</code></pre>
<h2 id="testing">Testing</h2>
<p>Components and reducers can be tested as usual.  Testing <code>fetch</code> API usage is
achieved by using an optional parameter which defaults to <code>window.fetch</code> for
the asynchronous actions creators. Tests simply pass a stub function as the
optional argument.</p>
<h3 id="redux-mock-store">Redux mock store</h3>
<p>Redux mock store is a very simple mock interface for a Redux store that records
all received actions. This is used for testing the asynchronous action creators.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../../" class="navigation navigation-prev " aria-label="Previous page: Lecture 5 - Middlewares and asynchronous processes">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../async_process_with_middleware/" class="navigation navigation-next " aria-label="Next page: Asynchronous processes using middleware">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Asynchronous processes","level":"1.6.1","depth":2,"next":{"title":"Asynchronous processes using middleware","level":"1.6.2","depth":2,"path":"lecture_5/src/async_process_with_middleware/README.md","ref":"./lecture_5/src/async_process_with_middleware/README.md","articles":[]},"previous":{"title":"Lecture 5 - Middlewares and asynchronous processes","level":"1.6","depth":1,"path":"lecture_5/README.md","ref":"./lecture_5/README.md","articles":[{"title":"Asynchronous processes","level":"1.6.1","depth":2,"path":"lecture_5/src/async_process_basics/README.md","ref":"./lecture_5/src/async_process_basics/README.md","articles":[]},{"title":"Asynchronous processes using middleware","level":"1.6.2","depth":2,"path":"lecture_5/src/async_process_with_middleware/README.md","ref":"./lecture_5/src/async_process_with_middleware/README.md","articles":[]}]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"lecture_5/src/async_process_basics/README.md","mtime":"2019-04-29T07:58:46.255Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-05-07T11:44:36.712Z"},"basePath":"../../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../../gitbook/gitbook.js"></script>
    <script src="../../../gitbook/theme.js"></script>
    
        
        <script src="../../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

